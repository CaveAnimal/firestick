import{b as x,j as e}from"./index-BITMq2dn.js";import{r as a}from"./react-CrAnlijj.js";import{b as p}from"./index-Q6vxWtnJ.js";import{R as g,B as f,C as j,X as u,Y as b,T as m,b as y}from"./recharts-BIV-EGEs.js";import"./monaco-amF-kVe2.js";function T(){const d=x(),[s,l]=a.useState(null),[r,c]=a.useState(""),[o,n]=a.useState(!0);a.useEffect(()=>{let t=!1;return(async()=>{try{n(!0);const i=await p();t||l(i)}catch(i){t||c((i==null?void 0:i.message)||"Failed to load dashboard")}finally{t||n(!1)}})(),()=>{t=!0}},[]);const h=a.useMemo(()=>(s==null?void 0:s.chart)||[],[s]);return e.jsxs("div",{children:[e.jsx("h2",{children:"Analysis Dashboard"}),o&&e.jsx("div",{role:"status","aria-live":"polite",style:{marginBottom:8},children:"Loading dashboard…"}),r&&e.jsx("div",{role:"alert",style:{color:"#b00020",marginBottom:8},children:r}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:12},children:[o&&!s&&e.jsx(e.Fragment,{children:[1,2,3].map(t=>e.jsxs("div",{"aria-hidden":"true",style:{border:"1px solid #eee",borderRadius:6,padding:12},children:[e.jsx("div",{style:{height:14,width:140,background:"linear-gradient(90deg,#f0f0f0,#e8e8e8,#f0f0f0)",backgroundSize:"200% 100%",animation:"sh 1.2s ease-in-out infinite"}}),e.jsx("div",{style:{marginTop:12,height:120,background:"linear-gradient(90deg,#f9f9f9,#f1f1f1,#f9f9f9)",backgroundSize:"200% 100%",animation:"sh 1.2s ease-in-out infinite"}})]},t))}),e.jsxs("div",{style:{border:"1px solid #eee",borderRadius:6,padding:12},children:[e.jsx("h3",{style:{margin:"0 0 8px 0"},children:"Project Stats"}),e.jsxs("ul",{style:{margin:0},children:[e.jsxs("li",{children:["Total Files: ",(s==null?void 0:s.stats.totalFiles)??"—"]}),e.jsxs("li",{children:["Total Classes: ",(s==null?void 0:s.stats.totalClasses)??"—"]}),e.jsxs("li",{children:["Total Methods: ",(s==null?void 0:s.stats.totalMethods)??"—"]}),e.jsxs("li",{children:["Hotspots: ",(s==null?void 0:s.stats.hotspotCount)??"—"]})]})]}),e.jsxs("div",{style:{border:"1px solid #eee",borderRadius:6,padding:12},children:[e.jsx("h3",{style:{margin:"0 0 8px 0"},children:"Complexity"}),e.jsx("div",{style:{width:"100%",height:220},children:e.jsx(g,{children:e.jsxs(f,{data:h,children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"name"}),e.jsx(b,{}),e.jsx(m,{}),e.jsx(y,{dataKey:"value",fill:"#1976d2"})]})})})]}),e.jsxs("div",{style:{border:"1px solid #eee",borderRadius:6,padding:12},children:[e.jsx("h3",{style:{margin:"0 0 8px 0"},children:"Hotspots"}),e.jsx("ol",{children:((s==null?void 0:s.hotspots)||[]).map((t,i)=>e.jsxs("li",{children:[e.jsx("button",{onClick:()=>d(`/search?q=${encodeURIComponent(t.name)}`),title:"Search for this hotspot",style:{border:"none",background:"transparent",color:"#1976d2",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},children:t.name})," ","(",t.count,")"]},i))})]})]}),e.jsx("style",{children:"@keyframes sh{0%{background-position:0 0}100%{background-position:200% 0}}"})]})}export{T as default};
