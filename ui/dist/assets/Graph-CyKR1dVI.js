import{j as t}from"./index-BITMq2dn.js";import{c as pe}from"./graph-CyJtwmzi.js";import{g as ve,r as c}from"./react-CrAnlijj.js";import{g as he}from"./index-Q6vxWtnJ.js";import"./monaco-amF-kVe2.js";import"./recharts-BIV-EGEs.js";var ue={exports:{}};(function(z){(function(){var R={container:!1,viewLiveFramerate:0,dblClickDelay:200,removeCustomContainer:!0,rerenderDelay:500},j=function(){var i="Expected a function",a=Math.max,l=Date.now,m=l||function(){return new Date().getTime()};function f(s,p,u){var w,g,$,k,C,y,S,I=0,E=!1,_=!0;if(typeof s!="function")throw new TypeError(i);if(p=p<0?0:+p||0,u===!0){var L=!0;_=!1}else x(u)&&(L=!!u.leading,E="maxWait"in u&&a(+u.maxWait||0,p),_="trailing"in u?!!u.trailing:_);function T(){y&&clearTimeout(y),g&&clearTimeout(g),I=0,g=y=S=void 0}function P(M,D){D&&clearTimeout(D),g=y=S=void 0,M&&(I=m(),$=s.apply(C,w),!y&&!g&&(w=C=void 0))}function Z(){var M=p-(m()-k);M<=0||M>p?P(S,g):y=setTimeout(Z,M)}function Q(){P(_,y)}function H(){if(w=arguments,k=m(),C=this,S=_&&(y||!L),E===!1)var M=L&&!y;else{!g&&!L&&(I=k);var D=E-(k-I),B=D<=0||D>E;B?(g&&(g=clearTimeout(g)),I=k,$=s.apply(C,w)):g||(g=setTimeout(Q,D))}return B&&y?y=clearTimeout(y):!y&&p!==E&&(y=setTimeout(Z,p)),M&&(B=!0,$=s.apply(C,w)),B&&!y&&!g&&(w=C=void 0),$}return H.cancel=T,H}function x(s){var p=typeof s;return!!s&&(p=="object"||p=="function")}return f}(),r=function(i,a,l){var m=!0,f=!0;return l===!1?m=!1:typeof l==typeof{}&&(m="leading"in l?l.leading:m,f="trailing"in l?l.trailing:f),l=l||{},l.leading=m,l.maxWait=a,l.trailing=f,j(i,a,l)},W=function(i,a){this._init(i,a)},U=function(){for(var i=1;i<arguments.length;i++)for(var a in arguments[i])arguments[i].hasOwnProperty(a)&&(arguments[0][a]=arguments[i][a]);return arguments[0]},F=function(i){return i.getBoundingClientRect().width},O=function(i){return i.getBoundingClientRect().height};W.prototype={constructor:W,bb:function(){var i=this.cy.elements().boundingBox();return i.w===0||i.h===0?{x1:0,x2:1/0,y1:0,y2:1/0,w:1/0,h:1/0}:i},_addCyListener:function(i,a){this._cyListeners.push({events:i,handler:a}),this.cy.on(i,a)},_removeCyListeners:function(){var i=this.cy;this._cyListeners.forEach(function(a){i.off(a.events,a.handler)}),i.offRender(this._onRenderHandler)},_init:function(i,a){this._cyListeners=[],this.$element=i.container(),this.options=U({},R,a),this.cy=i,this.boundingBox=this.bb(),this.width=F(this.$element),this.height=O(this.$element),this._initPanel(),this._initThumbnail(),this._initView(),this._initOverlay()},destroy:function(){this._removeEventsHandling(),this.options.container&&!this.options.removeCustomContainer?this.$panel.innerHTML="":this.$panel.parentElement.removeChild(this.$panel)},_initPanel:function(){var i=this.options;i.container&&typeof i.container=="string"&&i.container.length>0?i.container.indexOf("#")!==-1?this.$panel=document.getElementById(i.container.replace("#","")):this.$panel=document.getElementsByClassName(i.container.replace(".",""))[0]:(this.$panel=document.createElement("div"),this.$panel.className="cytoscape-navigator",document.body.appendChild(this.$panel)),this._setupPanel(),this._addCyListener("resize",this.resize.bind(this))},_setupPanel:function(){this.panelWidth=F(this.$panel),this.panelHeight=O(this.$panel)},_initThumbnail:function(){this.$thumbnail=document.createElement("img"),this.$thumbnail.setAttribute("alt","Graph navigator"),this.$panel.appendChild(this.$thumbnail),this._setupThumbnailSizes(),this._setupThumbnail()},_setupThumbnail:function(){this._updateThumbnailImage()},_setupThumbnailSizes:function(){this.boundingBox=this.bb(),this.thumbnailZoom=Math.min(this.panelHeight/this.boundingBox.h,this.panelWidth/this.boundingBox.w),this.thumbnailPan={x:(this.panelWidth-this.thumbnailZoom*(this.boundingBox.x1+this.boundingBox.x2))/2,y:(this.panelHeight-this.thumbnailZoom*(this.boundingBox.y1+this.boundingBox.y2))/2}},_checkThumbnailSizesAndUpdate:function(){var i=this.thumbnailZoom,a=this.thumbnailPan.x,l=this.thumbnailPan.y;this._setupThumbnailSizes(),i!=this.thumbnailZoom||a!=this.thumbnailPan.x||l!=this.thumbnailPan.y?(this._setupThumbnail(),this._setupView()):this._updateThumbnailImage()},_initView:function(){this.$view=document.createElement("div"),this.$view.className="cytoscape-navigatorView",this.$panel.appendChild(this.$view),this.viewBorderTop=parseInt(this.$view.style["border-top-width"],10)||0,this.viewBorderRight=parseInt(this.$view.style["border-right-width"],10)||0,this.viewBorderBottom=parseInt(this.$view.style["border-bottom-width"],10)||0,this.viewBorderLeft=parseInt(this.$view.style["border-left-width"],10)||0,this.viewBorderHorizontal=this.viewBorderLeft+this.viewBorderRight,this.viewBorderVertical=this.viewBorderTop+this.viewBorderBottom,this._setupView(),this._addCyListener("zoom pan",this._setupView.bind(this))},_setupView:function(){if(!this.viewLocked){var i=this.cy.zoom(),a=this.cy.pan();this.viewW=this.width/i*this.thumbnailZoom,this.viewX=-a.x*this.viewW/this.width+this.thumbnailPan.x-this.viewBorderLeft,this.viewH=this.height/i*this.thumbnailZoom,this.viewY=-a.y*this.viewH/this.height+this.thumbnailPan.y-this.viewBorderTop,this.$view.style.width=this.viewW+"px",this.$view.style.height=this.viewH+"px",this.$view.style.position="absolute",this.$view.style.left=this.viewX+"px",this.$view.style.top=this.viewY+"px"}},_initOverlay:function(){this.$overlay=document.createElement("div"),this.$overlay.className="cytoscape-navigatorOverlay",this.$panel.appendChild(this.$overlay),this.overlayHookPointX=0,this.overlayHookPointY=0,this._initEventsHandling()},resize:function(){this.width=F(this.$element),this.height=O(this.$element),this._thumbnailSetup=!1,this._setupPanel(),this._checkThumbnailSizesAndUpdate(),this._setupView()},_initEventsHandling:function(){for(var i=this,a=["mousedown","mousewheel","DOMMouseScroll","touchstart"],l=["mouseup","mouseout","mousemove","touchmove","touchend"],m=function(s){if(s.type=="touchstart"&&(Object.defineProperty(s,"offsetX",{value:i.viewX+i.viewW/2,writable:!0}),Object.defineProperty(s,"offsetY",{value:i.viewY+i.viewH/2,writable:!0})),s.offsetX===void 0||s.offsetY===void 0){var p=s.target.getBoundingClientRect(),u={top:p.top+window.scrollY,left:p.left+window.scrollX};Object.defineProperty(s,"offsetX",{value:s.pageX-u.left,writable:!0}),Object.defineProperty(s,"offsetY",{value:s.pageY-u.top,writable:!0})}return s.type=="mousedown"||s.type=="touchstart"?i._eventMoveStart(s):(s.type=="mousewheel"||s.type=="DOMMouseScroll")&&i._eventZoom(s),!1},f=function(s){if(i.overlayInMovement){if(s.type=="touchend"?(Object.defineProperty(s,"offsetX",{value:i.viewX+i.viewW/2,writable:!0}),Object.defineProperty(s,"offsetY",{value:i.viewY+i.viewH/2,writable:!0})):s.type=="touchmove"&&(Object.defineProperty(s,"pageX",{value:s.originalEvent.touches[0].pageX,writable:!0}),Object.defineProperty(s,"pageY",{value:s.originalEvent.touches[0].pageY,writable:!0})),s.offsetX===void 0||s.offsetY===void 0){var p=s.target.getBoundingClientRect(),u={top:p.top+window.scrollY,left:p.left+window.scrollX};Object.defineProperty(s,"offsetX",{value:s.pageX-u.left,writable:!0}),Object.defineProperty(s,"offsetY",{value:s.pageY-u.top,writable:!0})}if(s.target!==i.$overlay){var p=s.target.getBoundingClientRect(),w=i.$overlay.getBoundingClientRect(),u={top:p.top+window.scrollY,left:p.left+window.scrollX},g={top:w.top+window.scrollY,left:w.left+window.scrollX};if(u&&g)Object.defineProperty(s,"offsetX",{value:s.offsetX-g.left+u.left,writable:!0}),Object.defineProperty(s,"offsetY",{value:s.offsetY-g.top+u.top,writable:!0});else return!1}return s.type=="mousemove"||s.type=="touchmove"?i._eventMove(s):(s.type=="mouseup"||s.type=="touchend")&&i._eventMoveEnd(s),!1}},x=0;x<a.length;x++)this.$overlay.addEventListener(a[x],m,!1);for(var x=0;x<l.length;x++)window.addEventListener(l[x],f,!1);this._removeEventsHandling=function(){for(var s=0;s<a.length;s++)this.$overlay.removeEventListener(a[s],m);for(var s=0;s<l.length;s++)window.removeEventListener(l[s],f)}},_eventMoveStart:function(i){var a=new Date().getTime();this.overlayLastMoveStartTime&&this.overlayLastMoveStartTime+this.options.dblClickDelay>a?(this.overlayLastMoveStartTime=0,this.overlayInMovement=!0,this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,this.options.viewLiveFramerate!==!1?this._eventMove({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}):this._eventMoveEnd({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}),this.overlayInMovement=!1):(this.overlayLastMoveStartTime=a,this.overlayInMovement=!0,this.viewLocked=!0,i.offsetX>=this.viewX&&i.offsetX<=this.viewX+this.viewW&&i.offsetY>=this.viewY&&i.offsetY<=this.viewY+this.viewH?(this.overlayHookPointX=i.offsetX-this.viewX,this.overlayHookPointY=i.offsetY-this.viewY):(this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,this._eventMove(i)))},_eventMove:function(i){var a=this;this._checkMousePosition(i),this.overlayInMovement&&(this.viewX=i.offsetX-this.overlayHookPointX,this.viewY=i.offsetY-this.overlayHookPointY,this.$view.style.left=this.viewX+"px",this.$view.style.top=this.viewY+"px",this.options.viewLiveFramerate!==!1&&(this.options.viewLiveFramerate==0?this._moveCy():this.overlayTimeout||(this.overlayTimeout=setTimeout(function(){a._moveCy(),a.overlayTimeout=!1},1e3/this.options.viewLiveFramerate))))},_checkMousePosition:function(i){i.offsetX>this.viewX&&i.offsetX<this.viewX+this.viewBorderHorizontal+this.viewW&&i.offsetY>this.viewY&&i.offsetY<this.viewY+this.viewBorderVertical+this.viewH?this.$panel.classList.add("mouseover-view"):this.$panel.classList.remove("mouseover-view")},_eventMoveEnd:function(i){this.viewLocked=!1,this.$panel.classList.remove("mouseover-view"),this.overlayInMovement&&(this._eventMove(i),this.options.viewLiveFramerate===!1&&this._moveCy(),this.overlayInMovement=!1)},_eventZoom:function(i){var a=U({},i.originalEvent),l=i.wheelDeltaY/1e3||i.wheelDelta/1e3||i.detail/-32||a.wheelDeltaY/1e3||a.wheelDelta/1e3||a.detail/-32,m=Math.pow(10,l),f={left:i.offsetX,top:i.offsetY};this.cy.zoomingEnabled()&&this._zoomCy(m,f)},_updateThumbnailImage:function(){var i=this;if(!this._thumbnailUpdating){this._thumbnailUpdating=!0;var a=function(){i._checkThumbnailSizesAndUpdate(),i._setupView();var l=i.$thumbnail,m=l,f=i.panelWidth,x=i.panelHeight,s=i.boundingBox,p=Math.min(f/s.w,x/s.h),u=i.cy.png({full:!0,scale:p,maxHeight:x,maxWidth:f});u.indexOf("image/png")<0?m.removeAttribute("src"):m.setAttribute("src",u);var w={x:(f-p*s.w)/2,y:(x-p*s.h)/2};l.style.position="absolute",l.style.left=w.x+"px",l.style.top=w.y+"px"};this._onRenderHandler=r(a,i.options.rerenderDelay),this.cy.onRender(this._onRenderHandler)}},_moveCy:function(){this.cy.pan({x:-(this.viewX+this.viewBorderLeft-this.thumbnailPan.x)*this.width/this.viewW,y:-(this.viewY+this.viewBorderLeft-this.thumbnailPan.y)*this.height/this.viewH})},_zoomCy:function(i,a){var l;l={x:this.width/2,y:this.height/2},this.cy.zoom({level:this.cy.zoom()*i,renderedPosition:l})}};var V=function(i){i&&i("core","navigator",function(a){var l=this;return new W(l,a)})};z.exports&&(z.exports=function(i){V(i)}),typeof cytoscape<"u"&&V(cytoscape)})()})(ue);var be=ue.exports;const xe=ve(be);pe.use(xe);function we(){const z=c.useRef(null),R=c.useRef(null),j=c.useRef(null),[r,W]=c.useState(null),[U,F]=c.useState(""),[O,V]=c.useState(""),[i,a]=c.useState(!0),[l,m]=c.useState(!0),[f,x]=c.useState(!0),[s,p]=c.useState(!1),[u,w]=c.useState(!0),[g,$]=c.useState(!0),[k,C]=c.useState(!0),[y,S]=c.useState(!0),[I,E]=c.useState(!0),[_,L]=c.useState(!0),[T,P]=c.useState(!0),Z=c.useRef(0),[Q,H]=c.useState(!0),[M,D]=c.useState(""),[B,ie]=c.useState("breadthfirst"),[fe,ee]=c.useState(!1),[Y,ne]=c.useState(!0),[se,ye]=c.useState(!1),[G,oe]=c.useState(""),[ae,re]=c.useState(""),[le,A]=c.useState("");c.useEffect(()=>{if(!z.current)return;try{const n=JSON.parse(localStorage.getItem("graph:prefs")||"null");n&&(typeof n.showFiles=="boolean"&&a(n.showFiles),typeof n.showClasses=="boolean"&&m(n.showClasses),typeof n.showMethods=="boolean"&&x(n.showMethods),typeof n.showImports=="boolean"&&p(n.showImports),typeof n.includeCalls=="boolean"&&w(n.includeCalls),typeof n.includeImports=="boolean"&&$(n.includeImports),typeof n.showEdgeContains=="boolean"&&C(n.showEdgeContains),typeof n.showEdgeDeclares=="boolean"&&S(n.showEdgeDeclares),typeof n.showEdgeImports=="boolean"&&E(n.showEdgeImports),typeof n.showEdgeCalls=="boolean"&&L(n.showEdgeCalls),typeof n.showEdgeInherits=="boolean"&&P(n.showEdgeInherits),typeof n.layoutName=="string"&&ie(n.layoutName),typeof n.showMinimap=="boolean"&&ne(n.showMinimap))}catch{}const e=pe({container:z.current,layout:{name:"breadthfirst",directed:!0,padding:10},style:[{selector:"node",style:{"background-color":"#1976d2",label:"data(label)",color:"#fff","text-valign":"center","text-halign":"center","font-size":10,shape:"round-rectangle"}},{selector:"edge",style:{width:2,"line-color":"#bdbdbd","target-arrow-color":"#bdbdbd","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:":selected",style:{"background-color":"#ff9800","line-color":"#ff9800","target-arrow-color":"#ff9800"}},{selector:'node[_t = "F"]',style:{"background-color":"#546e7a",shape:"round-rectangle"}},{selector:'node[_t = "C"]',style:{"background-color":"#1976d2",shape:"round-rectangle"}},{selector:'node[_t = "M"]',style:{"background-color":"#0288d1",shape:"diamond"}},{selector:'node[_t = "I"]',style:{"background-color":"#009688",shape:"ellipse"}},{selector:'edge[_t = "contains"], edge[_t = "containment"]',style:{"line-color":"#bdbdbd","target-arrow-color":"#bdbdbd",width:1.5}},{selector:'edge[_t = "declares"]',style:{"line-color":"#90a4ae","target-arrow-color":"#90a4ae","line-style":"dashed",width:1.5}},{selector:'edge[_t = "imports"]',style:{"line-color":"#43a047","target-arrow-color":"#43a047","line-style":"dashed"}},{selector:'edge[_t = "calls"]',style:{"line-color":"#ef6c00","target-arrow-color":"#ef6c00",width:3}},{selector:'edge[_t = "inherits"], edge[_t = "inheritance"]',style:{"line-color":"#7e57c2","target-arrow-color":"#7e57c2",width:2}}],elements:[]});if((async()=>{try{H(!0);const n=await he({limit:500,include:["containment",g?"imports":void 0,u?"calls":void 0,"inheritance"].filter(Boolean),nodeTypes:[i?"F":void 0,l?"C":void 0,f?"M":void 0,s?"I":void 0].filter(Boolean)}),o=[],v=new Set;n.nodes.forEach(b=>{v.has(b.id)||(o.push({data:{id:b.id,label:b.label,_t:b.type}}),v.add(b.id))}),n.edges.forEach(b=>{o.push({data:{source:b.source,target:b.target,_t:b.type||"rel"}})}),e.add(o),e.layout({name:B,directed:!0,padding:10}).run(),e.fit()}catch(n){D((n==null?void 0:n.message)||"Failed to load graph"),e.add([{data:{id:"A",label:"com.example.A"}},{data:{id:"B",label:"com.example.B"}},{data:{id:"C",label:"com.example.C"}},{data:{source:"A",target:"B"}},{data:{source:"B",target:"C"}},{data:{source:"A",target:"C"}}]),e.layout({name:B,directed:!0,padding:10}).run(),e.fit()}finally{H(!1)}})(),Y&&R.current)try{j.current=e.navigator({container:R.current,viewLiveFramerate:0,thumbnailEventFramerate:30,dblClickDelay:200,removeCustomContainer:!1,rerenderDelay:100})}catch{}return e.on("mouseover","edge",n=>{const o=performance.now();if(o-(Z.current||0)<50)return;Z.current=o;const v=n.target,b=v.source().data("label")||v.source().id(),X=v.target().data("label")||v.target().id(),N=(v.data("_t")||"").toString(),te=N?{calls:"calls",imports:"imports",inherits:"inherits",inheritance:"inherits",contains:"contains",containment:"contains",declares:"declares"}[N]||N:"";F(te?`${b} —[${te}]→ ${X}`:`${b} → ${X}`)}),e.on("mouseout","edge",()=>F("")),e.on("tap","node",n=>{const o=n.target;if(se){const b=o.id();if(!G)oe(b),A(`Start: ${o.data("label")||b}`);else if(!ae||b!==G){re(b),A(X=>`${X?X+" → ":""}End: ${o.data("label")||b}`);try{e.batch(()=>{e.elements().removeClass("path");const X=e.$id(G),N=e.$id(b);if(X.nonempty()&&N.nonempty()){const K=e.elements().dijkstra({root:X,weight:()=>1,directed:!0}).pathTo(N);K&&K.nonempty()?(K.addClass("path"),A(`Path length: ${K.length} (nodes+edges)`),e.fit(K,50)):A("No path found")}})}catch{}}return}e.batch(()=>{e.elements().removeClass("faded selected");const b=o.closedNeighborhood();e.elements().not(b).addClass("faded"),o.addClass("selected")});const v=o.closedNeighborhood();v&&v.length>0&&e.fit(v,40)}),e.on("tap",n=>{n.target===e&&e.elements().removeClass("faded selected")}),W(e),()=>{try{j.current&&j.current.destroy&&j.current.destroy()}catch{}e.destroy()}},[]);const J=e=>{if(!r)return;const d=r.zoom()+e;r.zoom(Math.max(.1,Math.min(3,d)))},de=()=>{r&&r.fit()},q=async()=>{if(r){D(""),H(!0),r.batch(()=>{r.elements().remove()});try{const e=await he({limit:500,include:["containment",g?"imports":void 0,u?"calls":void 0,"inheritance"].filter(Boolean),nodeTypes:[i?"F":void 0,l?"C":void 0,f?"M":void 0,s?"I":void 0].filter(Boolean)}),d=[],n=new Set;e.nodes.forEach(o=>{n.has(o.id)||(d.push({data:{id:o.id,label:o.label,_t:o.type}}),n.add(o.id))}),e.edges.forEach(o=>{d.push({data:{source:o.source,target:o.target,_t:o.type||"rel"}})}),r.add(d),r.layout({name:B,directed:!0,padding:10}).run(),r.fit(),h();try{j.current&&j.current.destroy&&j.current.destroy(),Y&&R.current&&(j.current=r.navigator({container:R.current,viewLiveFramerate:0,thumbnailEventFramerate:30,removeCustomContainer:!1,rerenderDelay:100}))}catch{}}catch(e){D((e==null?void 0:e.message)||"Failed to load graph")}finally{H(!1)}}},ge=()=>{if(!r)return;const e=r.png({full:!0,scale:2,bg:"#ffffff"}),d=document.createElement("a");d.href=e,d.download="graph.png",d.click()},ce=()=>{r&&(oe(""),re(""),A(""),r.batch(()=>{r.elements().removeClass("path")}))},me=()=>{if(!r)return;const e=r.svg({full:!0,scale:1,bg:"#ffffff"}),d=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(d),o=document.createElement("a");o.href=n,o.download="graph.svg",o.click(),URL.revokeObjectURL(n)},h=()=>{if(!r)return;const e=O.trim().toLowerCase(),d=n=>{const o=(n||"").toString();return o==="calls"?_:o==="imports"?I:o==="inherits"||o==="inheritance"?T:o==="declares"?y:o==="contains"||o==="containment"||o===""||o==="rel"?k:!0};r.batch(()=>{e?(r.nodes().forEach(n=>{`${n.data("label")||n.id()}`.toLowerCase().includes(e)?n.removeClass("hidden"):n.addClass("hidden")}),r.edges().forEach(n=>{const o=!n.source().hasClass("hidden")&&!n.target().hasClass("hidden")&&d(n.data("_t"));n[o?"removeClass":"addClass"]("hidden")})):r.elements().removeClass("hidden"),r.nodes().forEach(n=>{const o=(n.data("_t")||"").toString();o==="F"&&i||o==="C"&&l||o==="M"&&f||o==="I"&&s||!o||n.addClass("hidden")}),r.edges().forEach(n=>{const o=!n.source().hasClass("hidden")&&!n.target().hasClass("hidden")&&d(n.data("_t"));n[o?"removeClass":"addClass"]("hidden")})})};return c.useEffect(()=>{if(!r)return;const e=()=>{const n=r.zoom()>=.4;r.batch(()=>{r.nodes().forEach(o=>{o.style("label",n?o.data("label")||o.id():"")})})};return e(),r.on("zoom",e),()=>{r.off("zoom",e)}},[r]),c.useEffect(()=>{const e={showFiles:i,showClasses:l,showMethods:f,showImports:s,includeCalls:u,includeImports:g,showEdgeContains:k,showEdgeDeclares:y,showEdgeImports:I,showEdgeCalls:_,showEdgeInherits:T,layoutName:B,showMinimap:Y};try{localStorage.setItem("graph:prefs",JSON.stringify(e))}catch{}},[i,l,f,s,u,g,k,y,I,_,T,B,Y]),c.useEffect(()=>{if(r)try{j.current&&j.current.destroy&&(j.current.destroy(),j.current=null),Y&&R.current&&(j.current=r.navigator({container:R.current,viewLiveFramerate:0,thumbnailEventFramerate:30,removeCustomContainer:!1,rerenderDelay:100}))}catch{}},[Y,r]),c.useEffect(()=>{const e=d=>{if(!(d.target&&d.target.tagName==="INPUT")){if(d.key==="+"||d.key==="=")J(.1),d.preventDefault();else if(d.key==="-")J(-.1),d.preventDefault();else if(d.key.toLowerCase()==="r")de(),d.preventDefault();else if(d.key.toLowerCase()==="f"){if(r){const n=r.$(":selected");n&&n.length>0&&r.fit(n,40)}d.preventDefault()}else if(d.key==="/"){const n=document.getElementById("graph-filter");n&&(n.focus(),d.preventDefault())}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r]),t.jsxs("div",{children:[Q&&t.jsx("div",{role:"status","aria-live":"polite",style:{marginBottom:8},children:"Loading graph…"}),M&&t.jsx("div",{role:"alert",style:{color:"#b00020",marginBottom:8},children:M}),t.jsxs("div",{style:{marginBottom:8,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>J(.1),children:"Zoom In"}),t.jsx("button",{onClick:()=>J(-.1),children:"Zoom Out"}),t.jsx("button",{onClick:de,children:"Reset"}),t.jsx("button",{onClick:q,children:"Reload"}),t.jsx("button",{onClick:ge,children:"Export PNG"}),t.jsx("button",{onClick:me,children:"Export SVG"}),t.jsx("div",{style:{width:1,height:18,background:"#ddd"}}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[t.jsx("input",{type:"checkbox",checked:se,onChange:e=>{ye(e.target.checked),e.target.checked||ce()}}),"Shortest Path"]}),t.jsx("button",{disabled:!G&&!ae,onClick:ce,children:"Clear Path"}),t.jsx("button",{onClick:()=>{if(!r)return;const e={nodes:r.nodes().map(v=>({id:v.id(),label:v.data("label"),type:v.data("_t")})),edges:r.edges().map(v=>({source:v.source().id(),target:v.target().id(),type:v.data("_t")}))},d=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(d),o=document.createElement("a");o.href=n,o.download="graph.json",o.click(),URL.revokeObjectURL(n)},children:"Export JSON"}),t.jsx("button",{onClick:()=>ee(!0),children:"Shortcuts"}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:Y,onChange:e=>ne(e.target.checked)})," Minimap"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[t.jsx("span",{children:"Layout"}),t.jsxs("select",{value:B,onChange:e=>ie(e.target.value),children:[t.jsx("option",{value:"breadthfirst",children:"breadthfirst"}),t.jsx("option",{value:"cose",children:"cose"}),t.jsx("option",{value:"circle",children:"circle"}),t.jsx("option",{value:"concentric",children:"concentric"}),t.jsx("option",{value:"grid",children:"grid"})]})]}),t.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8,alignItems:"center"},children:[t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:i,onChange:e=>{a(e.target.checked),h()}})," Files"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:l,onChange:e=>{m(e.target.checked),h()}})," Classes"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:f,onChange:e=>{x(e.target.checked),h()}})," Methods"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:s,onChange:e=>{p(e.target.checked),h()}})," Imports"]})]}),t.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[t.jsx("label",{htmlFor:"graph-filter",children:"Filter"}),t.jsx("input",{id:"graph-filter",value:O,onChange:e=>V(e.target.value),placeholder:"Type to filter..."}),t.jsx("button",{onClick:h,children:"Apply"}),t.jsx("button",{onClick:()=>{V(""),h()},children:"Clear"}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[t.jsx("span",{children:"Preset"}),t.jsxs("select",{onChange:e=>{const d=e.target.value;d==="structure"?(w(!1),$(!1),L(!1),E(!1),C(!0),S(!0),P(!0),q()):d==="calls"?(w(!0),$(!1),L(!0),E(!1),C(!1),S(!1),P(!1),q()):d==="all"&&(w(!0),$(!0),L(!0),E(!0),C(!0),S(!0),P(!0),q())},defaultValue:"custom",children:[t.jsx("option",{value:"custom",children:"custom"}),t.jsx("option",{value:"structure",children:"structure-only"}),t.jsx("option",{value:"calls",children:"calls-only"}),t.jsx("option",{value:"all",children:"all"})]})]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4,marginLeft:8},children:[t.jsx("input",{type:"checkbox",checked:u,onChange:e=>w(e.target.checked)})," Calls"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:g,onChange:e=>$(e.target.checked)})," Imports"]}),t.jsx("div",{style:{width:1,height:18,background:"#ddd",margin:"0 6px"}}),t.jsx("span",{style:{color:"#777"},children:"Edges:"}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:k,onChange:e=>{C(e.target.checked),h()}})," Contains"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:y,onChange:e=>{S(e.target.checked),h()}})," Declares"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:I,onChange:e=>{E(e.target.checked),h()}})," Imports"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:_,onChange:e=>{L(e.target.checked),h()}})," Calls"]}),t.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx("input",{type:"checkbox",checked:T,onChange:e=>{P(e.target.checked),h()}})," Inherits"]})]})]}),t.jsxs("div",{"aria-label":"Legend",style:{display:"flex",flexWrap:"wrap",gap:16,alignItems:"center",fontSize:12,color:"#555",marginBottom:8},children:[t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":i,onClick:()=>{a(!i),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),a(!i),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:i?1:.5},children:[t.jsx("span",{title:"File",style:{width:14,height:10,borderRadius:4,background:"#546e7a",display:"inline-block"}}),t.jsx("span",{children:"File"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":l,onClick:()=>{m(!l),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),m(!l),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:l?1:.5},children:[t.jsx("span",{title:"Class",style:{width:14,height:10,borderRadius:4,background:"#1976d2",display:"inline-block"}}),t.jsx("span",{children:"Class"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":f,onClick:()=>{x(!f),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),x(!f),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:f?1:.5},children:[t.jsx("span",{title:"Method",style:{width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent",borderBottom:"12px solid #0288d1",display:"inline-block"}}),t.jsx("span",{children:"Method"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":s,onClick:()=>{p(!s),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),p(!s),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:s?1:.5},children:[t.jsx("span",{title:"Import",style:{width:12,height:12,borderRadius:"50%",background:"#009688",display:"inline-block"}}),t.jsx("span",{children:"Import"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":k,onClick:()=>{C(!k),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),C(!k),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:k?1:.5},children:[t.jsx("span",{title:"Contains",style:{width:26,height:0,borderTop:"2px solid #bdbdbd",position:"relative",display:"inline-block"},children:t.jsx("span",{style:{position:"absolute",right:-4,top:-4,width:0,height:0,borderLeft:"6px solid #bdbdbd",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})}),t.jsx("span",{children:"Contains"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":y,onClick:()=>{S(!y),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),S(!y),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:y?1:.5},children:[t.jsx("span",{title:"Declares",style:{width:26,height:0,borderTop:"2px dashed #90a4ae",position:"relative",display:"inline-block"},children:t.jsx("span",{style:{position:"absolute",right:-4,top:-4,width:0,height:0,borderLeft:"6px solid #90a4ae",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})}),t.jsx("span",{children:"Declares"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":I,onClick:()=>{E(!I),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),E(!I),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:I?1:.5},children:[t.jsx("span",{title:"Imports",style:{width:26,height:0,borderTop:"2px dashed #43a047",position:"relative",display:"inline-block"},children:t.jsx("span",{style:{position:"absolute",right:-4,top:-4,width:0,height:0,borderLeft:"6px solid #43a047",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})}),t.jsx("span",{children:"Imports"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":_,onClick:()=>{L(!_),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),L(!_),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:_?1:.5},children:[t.jsx("span",{title:"Calls",style:{width:26,height:0,borderTop:"3px solid #ef6c00",position:"relative",display:"inline-block"},children:t.jsx("span",{style:{position:"absolute",right:-4,top:-5,width:0,height:0,borderLeft:"6px solid #ef6c00",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})}),t.jsx("span",{children:"Calls"})]}),t.jsxs("span",{role:"button",tabIndex:0,"aria-pressed":T,onClick:()=>{P(!T),h()},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),P(!T),h())},style:{display:"inline-flex",alignItems:"center",gap:6,cursor:"pointer",opacity:T?1:.5},children:[t.jsx("span",{title:"Inherits",style:{width:26,height:0,borderTop:"2px solid #7e57c2",position:"relative",display:"inline-block"},children:t.jsx("span",{style:{position:"absolute",right:-4,top:-4,width:0,height:0,borderLeft:"6px solid #7e57c2",borderTop:"4px solid transparent",borderBottom:"4px solid transparent"}})}),t.jsx("span",{children:"Inherits"})]}),t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:"#ff9800",display:"inline-block"}}),t.jsx("span",{children:"Selected"})]}),t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:"#ccc",display:"inline-block",opacity:.6}}),t.jsx("span",{children:"Faded"})]})]}),U&&t.jsxs("div",{"aria-live":"polite",style:{marginBottom:8,fontSize:12,color:"#555"},children:["Edge: ",U]}),le&&t.jsx("div",{"aria-live":"polite",style:{marginBottom:8,fontSize:12,color:"#0d47a1"},children:le}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("div",{ref:z,style:{border:"1px solid #eee",height:420,borderRadius:6}}),t.jsx("div",{"aria-label":"Minimap",style:{position:"absolute",right:8,bottom:8,width:160,height:110,background:"#fff",border:"1px solid #ddd",borderRadius:4,boxShadow:"0 1px 4px rgba(0,0,0,0.08)",overflow:"hidden",display:Y?"block":"none"},children:t.jsx("div",{ref:R,style:{width:"100%",height:"100%"}})})]}),fe&&t.jsx("div",{role:"dialog","aria-modal":"true","aria-label":"Keyboard Shortcuts",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>ee(!1),children:t.jsxs("div",{style:{background:"#fff",padding:16,borderRadius:8,minWidth:360},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsx("h3",{style:{margin:0},children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:()=>ee(!1),"aria-label":"Close",children:"×"})]}),t.jsxs("ul",{style:{margin:0,paddingLeft:16},children:[t.jsx("li",{children:"+ / - : Zoom in / out"}),t.jsx("li",{children:"R : Reset view"}),t.jsx("li",{children:"F : Focus selection"}),t.jsx("li",{children:"/ : Focus filter input"}),t.jsx("li",{children:"? : Open this help"})]})]})}),t.jsx("style",{children:`
        .faded { opacity: 0.2; }
        .hidden { display: none; }
        .selected { outline: 2px solid #ff9800; }
        .path { outline: 2px solid #1b5e20; line-color: #1b5e20; target-arrow-color: #1b5e20; background-color: #1b5e20; }
      `})]})}function Se(){return t.jsxs("div",{children:[t.jsx("h2",{children:"Dependency Graph"}),t.jsx(we,{})]})}export{Se as default};
